<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>phpDocumentor » \Amfphp_Core_Amf_Serializer</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">phpDocumentor</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Amfphp.html"><i class="icon-folder-open"></i> Amfphp</a></li>
<li><a href="../packages/Tests.html"><i class="icon-folder-open"></i> Tests</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul><li>todo 
                <span class="label label-info">13</span>
</li></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods
                    <ul>
<li class="method public "><a href="#method_getOutput" title="getOutput :: get serialized data output"><span class="description">get serialized data output</span><pre>getOutput()</pre></a></li>
<li class="method public "><a href="#method_serialize" title="serialize :: converts from php object to binary"><span class="description">converts from php object to binary</span><pre>serialize()</pre></a></li>
</ul>
</li>
<li class="nav-header protected">» Protected
                    <ul>
<li class="method protected "><a href="#method_getAmf3Int" title="getAmf3Int :: Return the serialisation of the given integer (Amf3)."><span class="description">Return the serialisation of the given integer (Amf3).</span><pre>getAmf3Int()</pre></a></li>
<li class="method protected "><a href="#method_handleReference" title="handleReference :: looks if $obj already has a reference."><span class="description">looks if $obj already has a reference.</span><pre>handleReference()</pre></a></li>
<li class="method protected "><a href="#method_resetReferences" title="resetReferences :: initialize reference arrays and counters."><span class="description">initialize reference arrays and counters.</span><pre>resetReferences()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3AnonymousObject" title="writeAmf3AnonymousObject :: handles writing an anoynous object (stdClass)
 can also be a reference
Also creates a bogus traits entry, as even an anonymous object has traits."><span class="description">handles writing an anoynous object (stdClass)
 can also be a reference
Also creates a bogus traits entry, as even an anonymous object has traits.</span><pre>writeAmf3AnonymousObject()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Array" title="writeAmf3Array :: write amf3 array"><span class="description">write amf3 array</span><pre>writeAmf3Array()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Bool" title="writeAmf3Bool :: Write a boolean (Amf3)."><span class="description">Write a boolean (Amf3).</span><pre>writeAmf3Bool()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3ByteArray" title="writeAmf3ByteArray :: write Amfphp_Core_Amf_Types_ByteArray in amf3"><span class="description">write Amfphp_Core_Amf_Types_ByteArray in amf3</span><pre>writeAmf3ByteArray()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Data" title="writeAmf3Data :: write amf 3 data"><span class="description">write amf 3 data</span><pre>writeAmf3Data()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Date" title="writeAmf3Date :: write Amfphp_Core_Amf_Types_Date in amf 3"><span class="description">write Amfphp_Core_Amf_Types_Date in amf 3</span><pre>writeAmf3Date()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Int" title="writeAmf3Int :: Write an (un-)signed integer (Amf3)."><span class="description">Write an (un-)signed integer (Amf3).</span><pre>writeAmf3Int()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Null" title="writeAmf3Null :: Write NULL (Amf3)."><span class="description">Write NULL (Amf3).</span><pre>writeAmf3Null()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Number" title="writeAmf3Number :: write Amf3 Number"><span class="description">write Amf3 Number</span><pre>writeAmf3Number()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3String" title="writeAmf3String :: Write a string (Amf3)."><span class="description">Write a string (Amf3).</span><pre>writeAmf3String()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3TypedObject" title="writeAmf3TypedObject :: writes a typed object."><span class="description">writes a typed object.</span><pre>writeAmf3TypedObject()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Undefined" title="writeAmf3Undefined :: Write undefined (Amf3)."><span class="description">Write undefined (Amf3).</span><pre>writeAmf3Undefined()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3Xml" title="writeAmf3Xml :: write Amfphp_Core_Amf_Types_Xml in amf3"><span class="description">write Amfphp_Core_Amf_Types_Xml in amf3</span><pre>writeAmf3Xml()</pre></a></li>
<li class="method protected "><a href="#method_writeAmf3XmlDocument" title="writeAmf3XmlDocument :: write Amfphp_Core_Amf_Types_XmlDocument in amf3"><span class="description">write Amfphp_Core_Amf_Types_XmlDocument in amf3</span><pre>writeAmf3XmlDocument()</pre></a></li>
<li class="method protected "><a href="#method_writeAnonymousObject" title="writeAnonymousObject :: handles writing an anoynous object (stdClass)
 can also be a reference"><span class="description">handles writing an anoynous object (stdClass)
 can also be a reference</span><pre>writeAnonymousObject()</pre></a></li>
<li class="method protected "><a href="#method_writeArrayOrObject" title="writeArrayOrObject :: writeArrayOrObject first determines if the PHP array contains all numeric indexes
or a mix of keys."><span class="description">writeArrayOrObject first determines if the PHP array contains all numeric indexes
or a mix of keys.</span><pre>writeArrayOrObject()</pre></a></li>
<li class="method protected "><a href="#method_writeBoolean" title="writeBoolean :: writeBoolean writes the boolean code (0x01) and the data to the output stream"><span class="description">writeBoolean writes the boolean code (0x01) and the data to the output stream</span><pre>writeBoolean()</pre></a></li>
<li class="method protected "><a href="#method_writeByte" title="writeByte :: writeByte writes a singe byte to the output stream
0-255 range"><span class="description">writeByte writes a singe byte to the output stream
0-255 range</span><pre>writeByte()</pre></a></li>
<li class="method protected "><a href="#method_writeData" title="writeData :: writeData checks to see if the type was declared and then either
auto negotiates the type or relies on the user defined type to
serialize the data into Amf"><span class="description">writeData checks to see if the type was declared and then either
auto negotiates the type or relies on the user defined type to
serialize the data into Amf</span><pre>writeData()</pre></a></li>
<li class="method protected "><a href="#method_writeDate" title="writeDate :: writeDate writes the date code (0x0B) and the date value (milliseconds from 1 January 1970) to the output stream, along with an empty unsupported timezone"><span class="description">writeDate writes the date code (0x0B) and the date value (milliseconds from 1 January 1970) to the output stream, along with an empty unsupported timezone</span><pre>writeDate()</pre></a></li>
<li class="method protected "><a href="#method_writeDouble" title="writeDouble :: writeDouble takes a float as the input and writes it to the output stream."><span class="description">writeDouble takes a float as the input and writes it to the output stream.</span><pre>writeDouble()</pre></a></li>
<li class="method protected "><a href="#method_writeInt" title="writeInt :: writeInt takes an int and writes it as 2 bytes to the output stream
0-65535 range"><span class="description">writeInt takes an int and writes it as 2 bytes to the output stream
0-65535 range</span><pre>writeInt()</pre></a></li>
<li class="method protected "><a href="#method_writeLong" title="writeLong :: writeLong takes an int, float or double and converts it to a 4 byte binary string and
adds it to the output buffer"><span class="description">writeLong takes an int, float or double and converts it to a 4 byte binary string and
adds it to the output buffer</span><pre>writeLong()</pre></a></li>
<li class="method protected "><a href="#method_writeLongUtf" title="writeLongUtf :: writeLongUTF will write a string longer than 65535 characters."><span class="description">writeLongUTF will write a string longer than 65535 characters.</span><pre>writeLongUtf()</pre></a></li>
<li class="method protected "><a href="#method_writeNull" title="writeNull :: writeNull writes the null code (0x05) to the output stream"><span class="description">writeNull writes the null code (0x05) to the output stream</span><pre>writeNull()</pre></a></li>
<li class="method protected "><a href="#method_writeNumber" title="writeNumber :: writeNumber writes the number code (0x00) and the numeric data to the output stream
All numbers passed through remoting are floats."><span class="description">writeNumber writes the number code (0x00) and the numeric data to the output stream
All numbers passed through remoting are floats.</span><pre>writeNumber()</pre></a></li>
<li class="method protected "><a href="#method_writeObjectEnd" title="writeObjectEnd :: writeObjectEnd writes the object end code (0x009) to the output stream"><span class="description">writeObjectEnd writes the object end code (0x009) to the output stream</span><pre>writeObjectEnd()</pre></a></li>
<li class="method protected "><a href="#method_writeObjectFromArray" title="writeObjectFromArray :: writeObjectFromArray handles writing a php array with string or mixed keys."><span class="description">writeObjectFromArray handles writing a php array with string or mixed keys.</span><pre>writeObjectFromArray()</pre></a></li>
<li class="method protected "><a href="#method_writeReference" title="writeReference :: write reference"><span class="description">write reference</span><pre>writeReference()</pre></a></li>
<li class="method protected "><a href="#method_writeString" title="writeString :: writeString writes the string code (0x02) and the UTF8 encoded
string to the output stream."><span class="description">writeString writes the string code (0x02) and the UTF8 encoded
string to the output stream.</span><pre>writeString()</pre></a></li>
<li class="method protected "><a href="#method_writeTypedObject" title="writeTypedObject :: writeTypedObject takes an instance of a class and writes the variables defined
in it to the output stream."><span class="description">writeTypedObject takes an instance of a class and writes the variables defined
in it to the output stream.</span><pre>writeTypedObject()</pre></a></li>
<li class="method protected "><a href="#method_writeUndefined" title="writeUndefined :: writeUndefined writes the Undefined code (0x06) to the output stream"><span class="description">writeUndefined writes the Undefined code (0x06) to the output stream</span><pre>writeUndefined()</pre></a></li>
<li class="method protected "><a href="#method_writeUtf" title="writeUtf :: writeUTF takes and input string, writes the length as an int and then
appends the string to the output buffer"><span class="description">writeUTF takes and input string, writes the length as an int and then
appends the string to the output buffer</span><pre>writeUtf()</pre></a></li>
<li class="method protected "><a href="#method_writeXML" title="writeXML :: writeXML writes the xml code (0x0F) and the XML string to the output stream
Note: strips whitespace"><span class="description">writeXML writes the xml code (0x0F) and the XML string to the output stream
Note: strips whitespace</span><pre>writeXML()</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i class="icon-custom icon-property"></i> Properties
                    <ul></ul>
</li>
<li class="nav-header protected">» Protected
                    <ul>
<li class="property protected "><a href="#property_Amf0StoredObjects" title="$Amf0StoredObjects :: used for Amf0 references"><span class="description"></span><pre>$Amf0StoredObjects</pre></a></li>
<li class="property protected "><a href="#property_className2TraitsInfo" title="$className2TraitsInfo :: used for traits references."><span class="description"></span><pre>$className2TraitsInfo</pre></a></li>
<li class="property protected "><a href="#property_outBuffer" title="$outBuffer :: "><span class="description">the output stream</span><pre>$outBuffer</pre></a></li>
<li class="property protected "><a href="#property_packet" title="$packet :: packet"><span class="description"></span><pre>$packet</pre></a></li>
<li class="property protected "><a href="#property_storedObjects" title="$storedObjects :: used for Amf3 references"><span class="description"></span><pre>$storedObjects</pre></a></li>
<li class="property protected "><a href="#property_storedStrings" title="$storedStrings :: amf3 references to strings"><span class="description"></span><pre>$storedStrings</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i class="icon-custom icon-constant"></i> Constants
                    <ul><li class="constant  "><a href="#constant_MAX_STORED_OBJECTS" title="MAX_STORED_OBJECTS :: the maximum amount of objects stored for reference"><span class="description">the maximum amount of objects stored for reference</span><pre>MAX_STORED_OBJECTS</pre></a></li></ul>
</li>
</ul>
</div>
<div class="span8">
<a id="\Amfphp_Core_Amf_Serializer"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/global.html">global</a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/Amfphp_Core_Amf_Serializer.html">Amfphp_Core_Amf_Serializer</a>
</li>
</ul>
<div class="element class">
<p class="short_description">AmfSerializer manages the job of translating PHP objects into
the actionscript equivalent via Amf.</p>
<div class="details">
<div class="long_description"><p>The main method of the serializer
is the serialize method which takes and AmfObject as it's argument
and builds the resulting Amf Message.</p></div>
<table class="table table-bordered"><tr>
<th>package</th>
<td><a href="../packages/Amfphp.Core.Amf.html">Amfphp_Core_Amf</a></td>
</tr></table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a id="method_getOutput"></a><div class="element clickable method public method_getOutput" data-toggle="collapse" data-target=".method_getOutput .collapse">
<h2>get serialized data output</h2>
<pre>getOutput() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a id="method_serialize"></a><div class="element clickable method public method_serialize" data-toggle="collapse" data-target=".method_serialize .collapse">
<h2>converts from php object to binary</h2>
<pre>serialize(<a href="../classes/Amfphp_Core_Amf_Packet.html">\Amfphp_Core_Amf_Packet</a> $data) : String</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The return type is noted as a String, but is a binary stream. echo it to the output buffer</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$data</h4>
<code><a href="../classes/Amfphp_Core_Amf_Packet.html">\Amfphp_Core_Amf_Packet</a></code>
</div>
<h3>Returns</h3>
<div class="subelement response"><code>String</code></div>
</div></div>
</div>
<a id="method_getAmf3Int"></a><div class="element clickable method protected method_getAmf3Int" data-toggle="collapse" data-target=".method_getAmf3Int .collapse">
<h2>Return the serialisation of the given integer (Amf3).</h2>
<pre>getAmf3Int(int $d) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>note: There does not seem to be a way to distinguish between signed and unsigned integers.
This method just sends the lowest 29 bit as-is, and the receiver is responsible to interpret
the result as signed or unsigned based on some context.</p>

<p>note: The limit imposed by Amf3 is 29 bit. So in case the given integer is longer than 29 bit,
only the lowest 29 bits will be serialised. No error will be logged!</p></div>
<table class="table table-bordered"><tr>
<th>TODO</th>
<td>refactor into writeAmf3Int</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>int</code><p>the integer to serialise</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a id="method_handleReference"></a><div class="element clickable method protected method_handleReference" data-toggle="collapse" data-target=".method_handleReference .collapse">
<h2>looks if $obj already has a reference.</h2>
<pre>handleReference(mixed $obj, array $references) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>If it does, write it, and return true. If not, add it to the references array.
Depending on whether or not the spl_object_hash function can be used ( available (PHP >= 5.2), and can only be used on an object)
things are handled a bit differently:
- if possible, objects are hashed and the hash is used as a key to the references array. So the array has the structure hash => reference
- if not, the object is pushed to the references array, and array_search is used. So the array has the structure reference => object.
maxing out the number of stored references improves performance(tested with an array of 9000 identical objects). This may be because isset's performance
is linked to the size of the array. weird...
note on using $references[$count] = &amp;$obj; rather than
$references[] = &amp;$obj;
the first one is right, the second is not, as with the second one we could end up with the following:
some object hash => 0, 0 => array. (it should be 1 => array)</p>

<p>This also means that 2 completely separate instances of a class but with the same values will be written fully twice if we can't use the hash system</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$obj</h4>
<code>mixed</code>
</div>
<div class="subelement argument">
<h4>$references</h4>
<code>array</code>
</div>
</div></div>
</div>
<a id="method_resetReferences"></a><div class="element clickable method protected method_resetReferences" data-toggle="collapse" data-target=".method_resetReferences .collapse">
<h2>initialize reference arrays and counters.</h2>
<pre>resetReferences() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"><p>Call before writing a body or a header, as the indices are local to each message body or header</p></div></div></div>
</div>
<a id="method_writeAmf3AnonymousObject"></a><div class="element clickable method protected method_writeAmf3AnonymousObject" data-toggle="collapse" data-target=".method_writeAmf3AnonymousObject .collapse">
<h2>handles writing an anoynous object (stdClass)
 can also be a reference
Also creates a bogus traits entry, as even an anonymous object has traits.</h2>
<pre>writeAmf3AnonymousObject(<a href="http://php.net/manual/en/class.stdclass.php">\stdClass</a> $d, \doReference $doReference) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>In this way a reference to a class trait will have the right id.</p></div>
<table class="table table-bordered"><tr>
<th>todo</th>
<td>it would seem that to create only one traits entry for an anonymous object would be the way to go. this
however messes things up in both Flash and Charles Proxy. For testing call discovery service using AMF. investigate.</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="http://php.net/manual/en/class.stdclass.php">\stdClass</a></code><p>The php object to write</p></div>
<div class="subelement argument">
<h4>$doReference</h4>
<code>\doReference</code><p>Boolean This is used by writeAmf3Array, where the reference has already been taken care of,
so there this method is called with false</p></div>
</div></div>
</div>
<a id="method_writeAmf3Array"></a><div class="element clickable method protected method_writeAmf3Array" data-toggle="collapse" data-target=".method_writeAmf3Array .collapse">
<h2>write amf3 array</h2>
<pre>writeAmf3Array(array $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>array</code>
</div>
</div></div>
</div>
<a id="method_writeAmf3Bool"></a><div class="element clickable method protected method_writeAmf3Bool" data-toggle="collapse" data-target=".method_writeAmf3Bool .collapse">
<h2>Write a boolean (Amf3).</h2>
<pre>writeAmf3Bool(bool $d) : \nothing</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>bool</code><p>the boolean to serialise</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\nothing</code></div>
</div></div>
</div>
<a id="method_writeAmf3ByteArray"></a><div class="element clickable method protected method_writeAmf3ByteArray" data-toggle="collapse" data-target=".method_writeAmf3ByteArray .collapse">
<h2>write Amfphp_Core_Amf_Types_ByteArray in amf3</h2>
<pre>writeAmf3ByteArray(\Amfphp_Core_Amf_Types_ByteArray $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="../classes/Amfphp_Core_Amf_Types_ByteArray.html">\Amfphp_Core_Amf_Types_ByteArray</a></code>
</div>
</div></div>
</div>
<a id="method_writeAmf3Data"></a><div class="element clickable method protected method_writeAmf3Data" data-toggle="collapse" data-target=".method_writeAmf3Data .collapse">
<h2>write amf 3 data</h2>
<pre>writeAmf3Data(mixed $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>todo</th>
<td>no type markers ("\6', for example) in this method!</td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>mixed</code>
</div>
</div></div>
</div>
<a id="method_writeAmf3Date"></a><div class="element clickable method protected method_writeAmf3Date" data-toggle="collapse" data-target=".method_writeAmf3Date .collapse">
<h2>write Amfphp_Core_Amf_Types_Date in amf 3</h2>
<pre>writeAmf3Date(\Amfphp_Core_Amf_Types_Date $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="../classes/Amfphp_Core_Amf_Types_Date.html">\Amfphp_Core_Amf_Types_Date</a></code>
</div>
</div></div>
</div>
<a id="method_writeAmf3Int"></a><div class="element clickable method protected method_writeAmf3Int" data-toggle="collapse" data-target=".method_writeAmf3Int .collapse">
<h2>Write an (un-)signed integer (Amf3).</h2>
<pre>writeAmf3Int(int $d) : \nothing</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>see</th>
<td><a href="">\getAmf3Int()</a></td>
</tr></table>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>int</code><p>the integer to serialise</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>\nothing</code></div>
</div></div>
</div>
<a id="method_writeAmf3Null"></a><div class="element clickable method protected method_writeAmf3Null" data-toggle="collapse" data-target=".method_writeAmf3Null .collapse">
<h2>Write NULL (Amf3).</h2>
<pre>writeAmf3Null() : \nothing</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>\nothing</code></div>
</div></div>
</div>
<a id="method_writeAmf3Number"></a><div class="element clickable method protected method_writeAmf3Number" data-toggle="collapse" data-target=".method_writeAmf3Number .collapse">
<h2>write Amf3 Number</h2>
<pre>writeAmf3Number(\number $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>\number</code>
</div>
</div></div>
</div>
<a id="method_writeAmf3String"></a><div class="element clickable method protected method_writeAmf3String" data-toggle="collapse" data-target=".method_writeAmf3String .collapse">
<h2>Write a string (Amf3).</h2>
<pre>writeAmf3String(string $d) : \The</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Strings are stored in a cache and in case the same string
is written again, a reference to the string is sent instead of the string itself.</p>

<p>note: Sending strings larger than 268435455 (2^28-1 byte) will (silently) fail!</p>

<p>note: The string marker is NOT sent here and has to be sent before, if needed.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>string</code><p>the string to send</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>\The</code>reference index inside the lookup table is returned. In case of an empty
string which is sent in a special way, NULL is returned.</div>
</div></div>
</div>
<a id="method_writeAmf3TypedObject"></a><div class="element clickable method protected method_writeAmf3TypedObject" data-toggle="collapse" data-target=".method_writeAmf3TypedObject .collapse">
<h2>writes a typed object.</h2>
<pre>writeAmf3TypedObject(object $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Type is determined by having an "explicit type" field. If this field is
not set, call writeAmf3AnonymousObject
write all properties as sealed members.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>object</code>
</div>
</div></div>
</div>
<a id="method_writeAmf3Undefined"></a><div class="element clickable method protected method_writeAmf3Undefined" data-toggle="collapse" data-target=".method_writeAmf3Undefined .collapse">
<h2>Write undefined (Amf3).</h2>
<pre>writeAmf3Undefined() : \nothing</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response"><code>\nothing</code></div>
</div></div>
</div>
<a id="method_writeAmf3Xml"></a><div class="element clickable method protected method_writeAmf3Xml" data-toggle="collapse" data-target=".method_writeAmf3Xml .collapse">
<h2>write Amfphp_Core_Amf_Types_Xml in amf3</h2>
<pre>writeAmf3Xml(\Amfphp_Core_Amf_Types_Xml $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="../classes/Amfphp_Core_Amf_Types_Xml.html">\Amfphp_Core_Amf_Types_Xml</a></code>
</div>
</div></div>
</div>
<a id="method_writeAmf3XmlDocument"></a><div class="element clickable method protected method_writeAmf3XmlDocument" data-toggle="collapse" data-target=".method_writeAmf3XmlDocument .collapse">
<h2>write Amfphp_Core_Amf_Types_XmlDocument in amf3</h2>
<pre>writeAmf3XmlDocument(\Amfphp_Core_Amf_Types_XmlDocument $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="../classes/Amfphp_Core_Amf_Types_XmlDocument.html">\Amfphp_Core_Amf_Types_XmlDocument</a></code>
</div>
</div></div>
</div>
<a id="method_writeAnonymousObject"></a><div class="element clickable method protected method_writeAnonymousObject" data-toggle="collapse" data-target=".method_writeAnonymousObject .collapse">
<h2>handles writing an anoynous object (stdClass)
 can also be a reference</h2>
<pre>writeAnonymousObject(<a href="http://php.net/manual/en/class.stdclass.php">\stdClass</a> $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="http://php.net/manual/en/class.stdclass.php">\stdClass</a></code><p>The php object to write</p></div>
</div></div>
</div>
<a id="method_writeArrayOrObject"></a><div class="element clickable method protected method_writeArrayOrObject" data-toggle="collapse" data-target=".method_writeArrayOrObject .collapse">
<h2>writeArrayOrObject first determines if the PHP array contains all numeric indexes
or a mix of keys.</h2>
<pre>writeArrayOrObject(array $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Then it either writes the array code (0x0A) or the
object code (0x03) and then the associated data.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>array</code><p>The php array</p></div>
</div></div>
</div>
<a id="method_writeBoolean"></a><div class="element clickable method protected method_writeBoolean" data-toggle="collapse" data-target=".method_writeBoolean .collapse">
<h2>writeBoolean writes the boolean code (0x01) and the data to the output stream</h2>
<pre>writeBoolean(bool $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>bool</code><p>The boolean value</p></div>
</div></div>
</div>
<a id="method_writeByte"></a><div class="element clickable method protected method_writeByte" data-toggle="collapse" data-target=".method_writeByte .collapse">
<h2>writeByte writes a singe byte to the output stream
0-255 range</h2>
<pre>writeByte(int $b) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$b</h4>
<code>int</code><p>An int that can be converted to a byte</p></div>
</div></div>
</div>
<a id="method_writeData"></a><div class="element clickable method protected method_writeData" data-toggle="collapse" data-target=".method_writeData .collapse">
<h2>writeData checks to see if the type was declared and then either
auto negotiates the type or relies on the user defined type to
serialize the data into Amf</h2>
<pre>writeData(mixed $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>mixed</code><p>The data</p></div>
</div></div>
</div>
<a id="method_writeDate"></a><div class="element clickable method protected method_writeDate" data-toggle="collapse" data-target=".method_writeDate .collapse">
<h2>writeDate writes the date code (0x0B) and the date value (milliseconds from 1 January 1970) to the output stream, along with an empty unsupported timezone</h2>
<pre>writeDate(\Amfphp_Core_Amf_Types_Date $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="../classes/Amfphp_Core_Amf_Types_Date.html">\Amfphp_Core_Amf_Types_Date</a></code><p>The date value</p></div>
</div></div>
</div>
<a id="method_writeDouble"></a><div class="element clickable method protected method_writeDouble" data-toggle="collapse" data-target=".method_writeDouble .collapse">
<h2>writeDouble takes a float as the input and writes it to the output stream.</h2>
<pre>writeDouble(double $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Then if the system is big-endian, it reverses the bytes order because all
doubles passed via remoting are passed little-endian.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>double</code><p>The double to add to the output buffer</p></div>
</div></div>
</div>
<a id="method_writeInt"></a><div class="element clickable method protected method_writeInt" data-toggle="collapse" data-target=".method_writeInt .collapse">
<h2>writeInt takes an int and writes it as 2 bytes to the output stream
0-65535 range</h2>
<pre>writeInt(int $n) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$n</h4>
<code>int</code><p>An integer to convert to a 2 byte binary string</p></div>
</div></div>
</div>
<a id="method_writeLong"></a><div class="element clickable method protected method_writeLong" data-toggle="collapse" data-target=".method_writeLong .collapse">
<h2>writeLong takes an int, float or double and converts it to a 4 byte binary string and
adds it to the output buffer</h2>
<pre>writeLong(\long $l) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$l</h4>
<code>\long</code><p>A long to convert to a 4 byte binary string</p></div>
</div></div>
</div>
<a id="method_writeLongUtf"></a><div class="element clickable method protected method_writeLongUtf" data-toggle="collapse" data-target=".method_writeLongUtf .collapse">
<h2>writeLongUTF will write a string longer than 65535 characters.</h2>
<pre>writeLongUtf(string $s) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>It works exactly as writeUTF does except uses a long for the length
flag.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$s</h4>
<code>string</code><p>A string to add to the byte stream</p></div>
</div></div>
</div>
<a id="method_writeNull"></a><div class="element clickable method protected method_writeNull" data-toggle="collapse" data-target=".method_writeNull .collapse">
<h2>writeNull writes the null code (0x05) to the output stream</h2>
<pre>writeNull() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_writeNumber"></a><div class="element clickable method protected method_writeNumber" data-toggle="collapse" data-target=".method_writeNumber .collapse">
<h2>writeNumber writes the number code (0x00) and the numeric data to the output stream
All numbers passed through remoting are floats.</h2>
<pre>writeNumber(int $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>int</code><p>The numeric data</p></div>
</div></div>
</div>
<a id="method_writeObjectEnd"></a><div class="element clickable method protected method_writeObjectEnd" data-toggle="collapse" data-target=".method_writeObjectEnd .collapse">
<h2>writeObjectEnd writes the object end code (0x009) to the output stream</h2>
<pre>writeObjectEnd() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_writeObjectFromArray"></a><div class="element clickable method protected method_writeObjectFromArray" data-toggle="collapse" data-target=".method_writeObjectFromArray .collapse">
<h2>writeObjectFromArray handles writing a php array with string or mixed keys.</h2>
<pre>writeObjectFromArray(array $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>It does
not write the object code as that is handled by the writeArrayOrObject and this method
is shared with the CustomClass writer which doesn't use the object code.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>array</code><p>The php array with string keys</p></div>
</div></div>
</div>
<a id="method_writeReference"></a><div class="element clickable method protected method_writeReference" data-toggle="collapse" data-target=".method_writeReference .collapse">
<h2>write reference</h2>
<pre>writeReference(int $num) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$num</h4>
<code>int</code>
</div>
</div></div>
</div>
<a id="method_writeString"></a><div class="element clickable method protected method_writeString" data-toggle="collapse" data-target=".method_writeString .collapse">
<h2>writeString writes the string code (0x02) and the UTF8 encoded
string to the output stream.</h2>
<pre>writeString(string $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Note: strings are truncated to 64k max length. Use XML as type
to send longer strings</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>string</code><p>The string data</p></div>
</div></div>
</div>
<a id="method_writeTypedObject"></a><div class="element clickable method protected method_writeTypedObject" data-toggle="collapse" data-target=".method_writeTypedObject .collapse">
<h2>writeTypedObject takes an instance of a class and writes the variables defined
in it to the output stream.</h2>
<pre>writeTypedObject(object $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>To accomplish this we just blanket grab all of the object vars with get_object_vars, minus the Amfphp_Core_Amf_Constants::FIELD_EXPLICIT_TYPE field, whiuch is used as class name</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code>object</code><p>The object to serialize the properties. The deserializer looks for Amfphp_Core_Amf_Constants::FIELD_EXPLICIT_TYPE on this object and writes it as the class name.</p></div>
</div></div>
</div>
<a id="method_writeUndefined"></a><div class="element clickable method protected method_writeUndefined" data-toggle="collapse" data-target=".method_writeUndefined .collapse">
<h2>writeUndefined writes the Undefined code (0x06) to the output stream</h2>
<pre>writeUndefined() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_writeUtf"></a><div class="element clickable method protected method_writeUtf" data-toggle="collapse" data-target=".method_writeUtf .collapse">
<h2>writeUTF takes and input string, writes the length as an int and then
appends the string to the output buffer</h2>
<pre>writeUtf(string $s) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$s</h4>
<code>string</code><p>The string less than 65535 characters to add to the stream</p></div>
</div></div>
</div>
<a id="method_writeXML"></a><div class="element clickable method protected method_writeXML" data-toggle="collapse" data-target=".method_writeXML .collapse">
<h2>writeXML writes the xml code (0x0F) and the XML string to the output stream
Note: strips whitespace</h2>
<pre>writeXML(\Amfphp_Core_Amf_Types_Xml $d) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$d</h4>
<code><a href="../classes/Amfphp_Core_Amf_Types_Xml.html">\Amfphp_Core_Amf_Types_Xml</a></code>
</div>
</div></div>
</div>
<h3>
<i class="icon-custom icon-property"></i> Properties</h3>
<a id="property_Amf0StoredObjects"> </a><div class="element clickable property protected property_Amf0StoredObjects" data-toggle="collapse" data-target=".property_Amf0StoredObjects .collapse">
<h2></h2>
<pre>$Amf0StoredObjects : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_className2TraitsInfo"> </a><div class="element clickable property protected property_className2TraitsInfo" data-toggle="collapse" data-target=".property_className2TraitsInfo .collapse">
<h2></h2>
<pre>$className2TraitsInfo : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"><p>key: class name. value: array(reference id, array(property names))</p></div></div></div>
</div>
<a id="property_outBuffer"> </a><div class="element clickable property protected property_outBuffer" data-toggle="collapse" data-target=".property_outBuffer .collapse">
<h2>the output stream</h2>
<pre>$outBuffer : String</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_packet"> </a><div class="element clickable property protected property_packet" data-toggle="collapse" data-target=".property_packet .collapse">
<h2></h2>
<pre>$packet : <a href="../classes/Amfphp_Core_Amf_Packet.html">\Amfphp_Core_Amf_Packet</a></pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_storedObjects"> </a><div class="element clickable property protected property_storedObjects" data-toggle="collapse" data-target=".property_storedObjects .collapse">
<h2></h2>
<pre>$storedObjects : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_storedStrings"> </a><div class="element clickable property protected property_storedStrings" data-toggle="collapse" data-target=".property_storedStrings .collapse">
<h2></h2>
<pre>$storedStrings : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<h3>
<i class="icon-custom icon-constant"></i> Constants</h3>
<a id="constant_MAX_STORED_OBJECTS"> </a><div class="element clickable constant  constant_MAX_STORED_OBJECTS" data-toggle="collapse" data-target=".constant_MAX_STORED_OBJECTS .collapse">
<h2>the maximum amount of objects stored for reference</h2>
<pre>MAX_STORED_OBJECTS </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a12</a> and<br>
            generated on 2013-02-04T14:01:09+01:00.<br></footer></div>
</div>
</body>
</html>
