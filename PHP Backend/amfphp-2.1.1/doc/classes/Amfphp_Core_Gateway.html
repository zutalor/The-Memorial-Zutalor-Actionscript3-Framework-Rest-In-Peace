<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>phpDocumentor » \Amfphp_Core_Gateway</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">phpDocumentor</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Amfphp.html"><i class="icon-folder-open"></i> Amfphp</a></li>
<li><a href="../packages/Tests.html"><i class="icon-folder-open"></i> Tests</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">0</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul><li>todo 
                <span class="label label-info">13</span>
</li></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods
                    <ul>
<li class="method public "><a href="#method___construct" title="__construct :: constructor"><span class="description">constructor</span><pre>__construct()</pre></a></li>
<li class="method public "><a href="#method_getResponseHeaders" title="getResponseHeaders :: get the response headers."><span class="description">get the response headers.</span><pre>getResponseHeaders()</pre></a></li>
<li class="method public "><a href="#method_output" title="output :: helper function for sending gateway data to output stream"><span class="description">helper function for sending gateway data to output stream</span><pre>output()</pre></a></li>
<li class="method public "><a href="#method_service" title="service :: The service method runs the gateway application."><span class="description">The service method runs the gateway application.</span><pre>service()</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i class="icon-custom icon-property"></i> Properties
                    <ul></ul>
</li>
<li class="nav-header protected">» Protected
                    <ul>
<li class="property protected "><a href="#property_config" title="$config :: config."><span class="description"></span><pre>$config</pre></a></li>
<li class="property protected "><a href="#property_contentType" title="$contentType :: the content type."><span class="description"></span><pre>$contentType</pre></a></li>
<li class="property protected "><a href="#property_getData" title="$getData :: typically the $_GET array."><span class="description"></span><pre>$getData</pre></a></li>
<li class="property protected "><a href="#property_postData" title="$postData :: typically the $_POST array."><span class="description"></span><pre>$postData</pre></a></li>
<li class="property protected "><a href="#property_rawInputData" title="$rawInputData :: the serialized request"><span class="description"></span><pre>$rawInputData</pre></a></li>
<li class="property protected "><a href="#property_rawOutputData" title="$rawOutputData :: the serialized response"><span class="description"></span><pre>$rawOutputData</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i class="icon-custom icon-constant"></i> Constants
                    <ul>
<li class="constant  "><a href="#constant_FILTER_DESERIALIZED_REQUEST" title="FILTER_DESERIALIZED_REQUEST :: filter called after the request is deserialized."><span class="description">filter called after the request is deserialized.</span><pre>FILTER_DESERIALIZED_REQUEST</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_DESERIALIZED_REQUEST_HANDLER" title="FILTER_DESERIALIZED_REQUEST_HANDLER :: filter called to allow a plugin to override the default amf deserialized request handler."><span class="description">filter called to allow a plugin to override the default amf deserialized request handler.</span><pre>FILTER_DESERIALIZED_REQUEST_HANDLER</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_DESERIALIZED_RESPONSE" title="FILTER_DESERIALIZED_RESPONSE :: filter called when the response is ready but not yet serialized."><span class="description">filter called when the response is ready but not yet serialized.</span><pre>FILTER_DESERIALIZED_RESPONSE</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_DESERIALIZER" title="FILTER_DESERIALIZER :: filter called to allow a plugin to override the default amf deserializer."><span class="description">filter called to allow a plugin to override the default amf deserializer.</span><pre>FILTER_DESERIALIZER</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_EXCEPTION_HANDLER" title="FILTER_EXCEPTION_HANDLER :: filter called to allow a plugin to override the default amf exception handler."><span class="description">filter called to allow a plugin to override the default amf exception handler.</span><pre>FILTER_EXCEPTION_HANDLER</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_HEADERS" title="FILTER_HEADERS :: filter called to get the headers"><span class="description">filter called to get the headers</span><pre>FILTER_HEADERS</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_SERIALIZED_REQUEST" title="FILTER_SERIALIZED_REQUEST :: filter called when the serialized request comes in."><span class="description">filter called when the serialized request comes in.</span><pre>FILTER_SERIALIZED_REQUEST</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_SERIALIZED_RESPONSE" title="FILTER_SERIALIZED_RESPONSE :: filter called when the packet response is ready and serialized."><span class="description">filter called when the packet response is ready and serialized.</span><pre>FILTER_SERIALIZED_RESPONSE</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_SERIALIZER" title="FILTER_SERIALIZER :: filter called to allow a plugin to override the default amf serializer."><span class="description">filter called to allow a plugin to override the default amf serializer.</span><pre>FILTER_SERIALIZER</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_SERVICE_FOLDER_PATHS" title="FILTER_SERVICE_FOLDER_PATHS :: filter just after plugin init."><span class="description">filter just after plugin init.</span><pre>FILTER_SERVICE_FOLDER_PATHS</pre></a></li>
<li class="constant  "><a href="#constant_FILTER_SERVICE_NAMES_2_CLASS_FIND_INFO" title="FILTER_SERVICE_NAMES_2_CLASS_FIND_INFO :: filter just after plugin init."><span class="description">filter just after plugin init.</span><pre>FILTER_SERVICE_NAMES_2_CLASS_FIND_INFO</pre></a></li>
</ul>
</li>
</ul>
</div>
<div class="span8">
<a id="\Amfphp_Core_Gateway"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/global.html">global</a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/Amfphp_Core_Gateway.html">Amfphp_Core_Gateway</a>
</li>
</ul>
<div class="element class">
<p class="short_description">where everything comes together in amfphp.</p>
<div class="details">
<div class="long_description"><p>The class used for the entry point of a remoting call</p></div>
<table class="table table-bordered">
<tr>
<th>package</th>
<td><a href="../packages/Amfphp.Core.html">Amfphp_Core</a></td>
</tr>
<tr>
<th>author</th>
<td><a href="">Ariel Sommeria-klein</a></td>
</tr>
</table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a id="method___construct"></a><div class="element clickable method public method___construct" data-toggle="collapse" data-target=".method___construct .collapse">
<h2>constructor</h2>
<pre>__construct(array $getData, array $postData, String $rawInputData, String $contentType, \Amfphp_Core_Config $config) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$getData</h4>
<code>array</code><p>typically the $_GET array.</p>
</div>
<div class="subelement argument">
<h4>$postData</h4>
<code>array</code><p>typically the $_POST array.</p>
</div>
<div class="subelement argument">
<h4>$rawInputData</h4>
<code>String</code>
</div>
<div class="subelement argument">
<h4>$contentType</h4>
<code>String</code>
</div>
<div class="subelement argument">
<h4>$config</h4>
<code><a href="../classes/Amfphp_Core_Config.html">\Amfphp_Core_Config</a></code><p>optional. The default config object will be used if null</p></div>
</div></div>
</div>
<a id="method_getResponseHeaders"></a><div class="element clickable method public method_getResponseHeaders" data-toggle="collapse" data-target=".method_getResponseHeaders .collapse">
<h2>get the response headers.</h2>
<pre>getResponseHeaders() : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Creates an associative array of headers, then filters them, then returns an array of strings</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>array</code></div>
</div></div>
</div>
<a id="method_output"></a><div class="element clickable method public method_output" data-toggle="collapse" data-target=".method_output .collapse">
<h2>helper function for sending gateway data to output stream</h2>
<pre>output() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_service"></a><div class="element clickable method public method_service" data-toggle="collapse" data-target=".method_service .collapse">
<h2>The service method runs the gateway application.</h2>
<pre>service() : \&lt;String&gt;</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>It deserializes the raw data passed into the constructor as an Amfphp_Core_Amf_Packet, handles the headers,
handles the messages as requests to services, and returns the responses from the services
It does not however handle output headers, gzip compression, etc. that is the job of the calling script</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>\&lt;String&gt;</code>the serialized amf packet containg the service responses</div>
</div></div>
</div>
<h3>
<i class="icon-custom icon-property"></i> Properties</h3>
<a id="property_config"> </a><div class="element clickable property protected property_config" data-toggle="collapse" data-target=".property_config .collapse">
<h2></h2>
<pre>$config : <a href="../classes/Amfphp_Core_Config.html">\Amfphp_Core_Config</a></pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_contentType"> </a><div class="element clickable property protected property_contentType" data-toggle="collapse" data-target=".property_contentType .collapse">
<h2></h2>
<pre>$contentType : String</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"><p>For example for amf, application/x-amf</p></div></div></div>
</div>
<a id="property_getData"> </a><div class="element clickable property protected property_getData" data-toggle="collapse" data-target=".property_getData .collapse">
<h2></h2>
<pre>$getData : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_postData"> </a><div class="element clickable property protected property_postData" data-toggle="collapse" data-target=".property_postData .collapse">
<h2></h2>
<pre>$postData : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_rawInputData"> </a><div class="element clickable property protected property_rawInputData" data-toggle="collapse" data-target=".property_rawInputData .collapse">
<h2></h2>
<pre>$rawInputData : String</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_rawOutputData"> </a><div class="element clickable property protected property_rawOutputData" data-toggle="collapse" data-target=".property_rawOutputData .collapse">
<h2></h2>
<pre>$rawOutputData : String</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<h3>
<i class="icon-custom icon-constant"></i> Constants</h3>
<a id="constant_FILTER_DESERIALIZED_REQUEST"> </a><div class="element clickable constant  constant_FILTER_DESERIALIZED_REQUEST" data-toggle="collapse" data-target=".constant_FILTER_DESERIALIZED_REQUEST .collapse">
<h2>filter called after the request is deserialized.</h2>
<pre>FILTER_DESERIALIZED_REQUEST </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The callee can modify the data and return it.</p></div>
<table class="table table-bordered"><tr>
<th>param</th>
<td></td>
</tr></table>
</div></div>
</div>
<a id="constant_FILTER_DESERIALIZED_REQUEST_HANDLER"> </a><div class="element clickable constant  constant_FILTER_DESERIALIZED_REQUEST_HANDLER" data-toggle="collapse" data-target=".constant_FILTER_DESERIALIZED_REQUEST_HANDLER .collapse">
<h2>filter called to allow a plugin to override the default amf deserialized request handler.</h2>
<pre>FILTER_DESERIALIZED_REQUEST_HANDLER </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Plugin should return a Amfphp_Core_Common_IDeserializedRequestHandler if it recognizes the request</p></div>
<table class="table table-bordered">
<tr>
<th>param</th>
<td><p>null at call in gateway.</p></td>
</tr>
<tr>
<th>param</th>
<td></td>
</tr>
</table>
</div></div>
</div>
<a id="constant_FILTER_DESERIALIZED_RESPONSE"> </a><div class="element clickable constant  constant_FILTER_DESERIALIZED_RESPONSE" data-toggle="collapse" data-target=".constant_FILTER_DESERIALIZED_RESPONSE .collapse">
<h2>filter called when the response is ready but not yet serialized.</h2>
<pre>FILTER_DESERIALIZED_RESPONSE </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The callee can modify the data and return it.</p></div>
<table class="table table-bordered"><tr>
<th>param</th>
<td></td>
</tr></table>
</div></div>
</div>
<a id="constant_FILTER_DESERIALIZER"> </a><div class="element clickable constant  constant_FILTER_DESERIALIZER" data-toggle="collapse" data-target=".constant_FILTER_DESERIALIZER .collapse">
<h2>filter called to allow a plugin to override the default amf deserializer.</h2>
<pre>FILTER_DESERIALIZER </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Plugin should return a Amfphp_Core_Common_IDeserializer if it recognizes the content type</p></div>
<table class="table table-bordered">
<tr>
<th>param</th>
<td><p>the deserializer. null at call in gateway.</p></td>
</tr>
<tr>
<th>param</th>
<td></td>
</tr>
</table>
</div></div>
</div>
<a id="constant_FILTER_EXCEPTION_HANDLER"> </a><div class="element clickable constant  constant_FILTER_EXCEPTION_HANDLER" data-toggle="collapse" data-target=".constant_FILTER_EXCEPTION_HANDLER .collapse">
<h2>filter called to allow a plugin to override the default amf exception handler.</h2>
<pre>FILTER_EXCEPTION_HANDLER </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>If the plugin takes over the handling of the request message,
it must set this to a proper Amfphp_Core_Common_IExceptionHandler</p></div>
<table class="table table-bordered">
<tr>
<th>param</th>
<td><p>null at call in gateway.</p></td>
</tr>
<tr>
<th>param</th>
<td></td>
</tr>
</table>
</div></div>
</div>
<a id="constant_FILTER_HEADERS"> </a><div class="element clickable constant  constant_FILTER_HEADERS" data-toggle="collapse" data-target=".constant_FILTER_HEADERS .collapse">
<h2>filter called to get the headers</h2>
<pre>FILTER_HEADERS </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered">
<tr>
<th>param</th>
<td><p>an associative array of headers. For example array('Content-Type' => 'application/x-amf')</p>
</td>
</tr>
<tr>
<th>param</th>
<td></td>
</tr>
</table>
</div></div>
</div>
<a id="constant_FILTER_SERIALIZED_REQUEST"> </a><div class="element clickable constant  constant_FILTER_SERIALIZED_REQUEST" data-toggle="collapse" data-target=".constant_FILTER_SERIALIZED_REQUEST .collapse">
<h2>filter called when the serialized request comes in.</h2>
<pre>FILTER_SERIALIZED_REQUEST </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered">
<tr>
<th>todo</th>
<td>this filter only allows manipulation of raw post data, and is as such a bit misleading. Maybe rename and do filters for GET and POST</td>
</tr>
<tr>
<th>param</th>
<td><p>the raw http data</p></td>
</tr>
</table>
</div></div>
</div>
<a id="constant_FILTER_SERIALIZED_RESPONSE"> </a><div class="element clickable constant  constant_FILTER_SERIALIZED_RESPONSE" data-toggle="collapse" data-target=".constant_FILTER_SERIALIZED_RESPONSE .collapse">
<h2>filter called when the packet response is ready and serialized.</h2>
<pre>FILTER_SERIALIZED_RESPONSE </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered"><tr>
<th>param</th>
<td><p>the raw http data</p></td>
</tr></table>
</div></div>
</div>
<a id="constant_FILTER_SERIALIZER"> </a><div class="element clickable constant  constant_FILTER_SERIALIZER" data-toggle="collapse" data-target=".constant_FILTER_SERIALIZER .collapse">
<h2>filter called to allow a plugin to override the default amf serializer.</h2>
<pre>FILTER_SERIALIZER </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<table class="table table-bordered">
<tr>
<th>param</th>
<td><p>the serializer. null at call in gateway.</p></td>
</tr>
<tr>
<th>param</th>
<td><p>Plugin sets to a Amfphp_Core_Common_ISerializer if it recognizes the content type</p></td>
</tr>
</table>
</div></div>
</div>
<a id="constant_FILTER_SERVICE_FOLDER_PATHS"> </a><div class="element clickable constant  constant_FILTER_SERVICE_FOLDER_PATHS" data-toggle="collapse" data-target=".constant_FILTER_SERVICE_FOLDER_PATHS .collapse">
<h2>filter just after plugin init.</h2>
<pre>FILTER_SERVICE_FOLDER_PATHS </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Use this to add a service folder for a plugin</p></div>
<table class="table table-bordered"><tr>
<th>param</th>
<td><p>serviceFolderPaths array of absolute paths</p></td>
</tr></table>
</div></div>
</div>
<a id="constant_FILTER_SERVICE_NAMES_2_CLASS_FIND_INFO"> </a><div class="element clickable constant  constant_FILTER_SERVICE_NAMES_2_CLASS_FIND_INFO" data-toggle="collapse" data-target=".constant_FILTER_SERVICE_NAMES_2_CLASS_FIND_INFO .collapse">
<h2>filter just after plugin init.</h2>
<pre>FILTER_SERVICE_NAMES_2_CLASS_FIND_INFO </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Use this to add a service for a plugin when a service folder isn't enough</p></div>
<table class="table table-bordered"><tr>
<th>param</th>
<td><p>serviceNames2ClassFindInfo array of ClassFindInfo. Key is the service nane</p></td>
</tr></table>
</div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a12</a> and<br>
            generated on 2013-02-04T14:01:09+01:00.<br></footer></div>
</div>
</body>
</html>
